{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { take, finalize } from 'rxjs/operators';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/cart.service\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"../../services/order.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nfunction PaymentComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction PaymentComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"h3\");\n    i0.ɵɵtext(2, \"Thank you for your order!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Your order has been successfully placed.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_div_15_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.continueShopping());\n    });\n    i0.ɵɵtext(6, \"Continue Shopping\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PaymentComponent_form_16_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Please enter a valid 16-digit card number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_form_16_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Please enter the cardholder name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_form_16_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Enter a valid month (1-12) \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_form_16_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Enter a valid year \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_form_16_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Enter a valid CVV (3-4 digits) \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_form_16_span_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Place Order\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_form_16_span_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 29);\n  }\n}\nfunction PaymentComponent_form_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 9);\n    i0.ɵɵlistener(\"ngSubmit\", function PaymentComponent_form_16_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.onSubmit());\n    });\n    i0.ɵɵelementStart(1, \"h3\");\n    i0.ɵɵtext(2, \"Payment Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 10)(4, \"label\");\n    i0.ɵɵtext(5, \"Card Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 11)(7, \"label\");\n    i0.ɵɵelement(8, \"input\", 12);\n    i0.ɵɵtext(9, \" Credit Card \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"label\");\n    i0.ɵɵelement(11, \"input\", 13);\n    i0.ɵɵtext(12, \" Debit Card \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 10)(14, \"label\");\n    i0.ɵɵtext(15, \"Card Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"input\", 14);\n    i0.ɵɵtemplate(17, PaymentComponent_form_16_div_17_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 10)(19, \"label\");\n    i0.ɵɵtext(20, \"Cardholder Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(21, \"input\", 16);\n    i0.ɵɵtemplate(22, PaymentComponent_form_16_div_22_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 17)(24, \"div\", 10)(25, \"label\");\n    i0.ɵɵtext(26, \"Expiry Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"input\", 18);\n    i0.ɵɵtemplate(28, PaymentComponent_form_16_div_28_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 10)(30, \"label\");\n    i0.ɵɵtext(31, \"Expiry Year\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"input\", 19);\n    i0.ɵɵtemplate(33, PaymentComponent_form_16_div_33_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\", 10)(35, \"label\");\n    i0.ɵɵtext(36, \"CVV\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(37, \"input\", 20);\n    i0.ɵɵtemplate(38, PaymentComponent_form_16_div_38_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 21)(40, \"label\");\n    i0.ɵɵelement(41, \"input\", 22);\n    i0.ɵɵtext(42, \" Save card for future purchases \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(43, \"div\", 23)(44, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_form_16_Template_button_click_44_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.goBack());\n    });\n    i0.ɵɵtext(45, \"Back to Checkout\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"button\", 25);\n    i0.ɵɵtemplate(47, PaymentComponent_form_16_span_47_Template, 2, 0, \"span\", 26)(48, PaymentComponent_form_16_span_48_Template, 1, 0, \"span\", 27);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.paymentForm);\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFieldInvalid(\"cardNumber\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFieldInvalid(\"cardholderName\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFieldInvalid(\"expiryMonth\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFieldInvalid(\"expiryYear\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFieldInvalid(\"cvv\"));\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.paymentForm.invalid || ctx_r0.isProcessing);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isProcessing);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isProcessing);\n  }\n}\nexport class PaymentComponent {\n  constructor(fb, cartService, authService, orderService, router) {\n    this.fb = fb;\n    this.cartService = cartService;\n    this.authService = authService;\n    this.orderService = orderService;\n    this.router = router;\n    this.cartTotal$ = this.cartService.getCartTotal();\n    this.cartItemCount$ = this.cartService.getCartItemCount();\n    this.cartItems = [];\n    this.orderTotal = 0;\n    this.isProcessing = false;\n    this.errorMessage = '';\n    this.orderPlaced = false;\n    this.userId = null;\n    this.subscriptions = [];\n    this.paymentForm = this.fb.group({\n      cardType: ['credit', [Validators.required]],\n      cardNumber: ['', [Validators.required, Validators.pattern('^[0-9]{16}$')]],\n      cardholderName: ['', [Validators.required]],\n      expiryMonth: ['', [Validators.required, Validators.min(1), Validators.max(12)]],\n      expiryYear: ['', [Validators.required, Validators.pattern('^[0-9]{4}$')]],\n      cvv: ['', [Validators.required, Validators.pattern('^[0-9]{3,4}$')]],\n      saveCard: [false]\n    });\n  }\n  ngOnInit() {\n    // Single authentication check\n    if (!this.authService.isLoggedIn()) {\n      this.router.navigate(['/login']);\n      return;\n    }\n    // Initialize component data\n    this.initializeComponentData();\n  }\n  initializeComponentData() {\n    // Get user data\n    const userSub = this.authService.user$.pipe(take(1)).subscribe({\n      next: user => {\n        if (user) {\n          this.userId = user.userId;\n          this.paymentForm.patchValue({\n            cardholderName: user.name || user.username\n          });\n        }\n      }\n    });\n    this.subscriptions.push(userSub);\n    // Get cart items\n    const cartSub = this.cartService.cartItems$.pipe(take(1)).subscribe(items => {\n      this.cartItems = items;\n      if (!items.length) {\n        this.router.navigate(['/cars']);\n      }\n    });\n    this.subscriptions.push(cartSub);\n    // Get cart total\n    const totalSub = this.cartTotal$.pipe(take(1)).subscribe(total => {\n      this.orderTotal = total;\n    });\n    this.subscriptions.push(totalSub);\n    // Check billing address\n    const billingAddress = localStorage.getItem('billingAddress');\n    if (!billingAddress) {\n      this.router.navigate(['/checkout']);\n      return;\n    }\n    // Pre-fill cardholder name from billing address if available\n    try {\n      const address = JSON.parse(billingAddress);\n      if (address.fullName) {\n        this.paymentForm.patchValue({\n          cardholderName: address.fullName\n        });\n      }\n    } catch (error) {\n      console.error('Error parsing billing address:', error);\n      this.router.navigate(['/checkout']);\n    }\n  }\n  isFieldInvalid(fieldName) {\n    const field = this.paymentForm.get(fieldName);\n    return field ? field.invalid && (field.dirty || field.touched) : false;\n  }\n  onSubmit() {\n    if (this.paymentForm.valid && !this.isProcessing) {\n      this.isProcessing = true;\n      this.errorMessage = '';\n      // Simulate payment processing\n      setTimeout(() => {\n        this.processOrder();\n      }, 1500);\n    } else {\n      Object.keys(this.paymentForm.controls).forEach(key => {\n        const control = this.paymentForm.get(key);\n        if (control?.invalid) {\n          control.markAsTouched();\n        }\n      });\n    }\n  }\n  processOrder() {\n    if (!this.userId || !this.cartItems.length) {\n      this.isProcessing = false;\n      this.errorMessage = 'Unable to process order. Please try again.';\n      return;\n    }\n    const billingAddress = localStorage.getItem('billingAddress');\n    if (!billingAddress) {\n      this.isProcessing = false;\n      this.router.navigate(['/checkout']);\n      return;\n    }\n    try {\n      const shippingAddress = JSON.parse(billingAddress);\n      // Create an order for each item in the cart\n      const orderRequests = this.cartItems.map(item => {\n        const orderData = {\n          userId: this.userId,\n          carId: item.id,\n          quantity: item.quantity,\n          totalPrice: item.price * item.quantity,\n          shippingAddress: JSON.stringify(shippingAddress)\n        };\n        return this.orderService.createOrder(orderData);\n      });\n      // Process all orders\n      forkJoin(orderRequests).pipe(finalize(() => this.isProcessing = false)).subscribe({\n        next: () => {\n          this.orderPlaced = true;\n          this.cartService.clearCart().subscribe();\n          localStorage.removeItem('billingAddress');\n        },\n        error: error => {\n          console.error('Order creation error:', error);\n          this.errorMessage = 'Failed to create order. Please try again.';\n        }\n      });\n    } catch (error) {\n      console.error('Error processing order:', error);\n      this.isProcessing = false;\n      this.errorMessage = 'Failed to process order. Please try again.';\n    }\n  }\n  goBack() {\n    this.router.navigate(['/checkout']);\n  }\n  continueShopping() {\n    this.router.navigate(['/cars']);\n  }\n  ngOnDestroy() {\n    // Cleanup subscriptions\n    this.subscriptions.forEach(sub => sub.unsubscribe());\n  }\n  static {\n    this.ɵfac = function PaymentComponent_Factory(t) {\n      return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.OrderService), i0.ɵɵdirectiveInject(i5.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PaymentComponent,\n      selectors: [[\"app-payment\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 17,\n      vars: 12,\n      consts: [[1, \"payment-container\"], [1, \"order-summary\"], [1, \"summary-details\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"success-message\", 4, \"ngIf\"], [\"class\", \"payment-form\", 3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"error-message\"], [1, \"success-message\"], [1, \"btn-primary\", 3, \"click\"], [1, \"payment-form\", 3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [1, \"card-type-group\"], [\"type\", \"radio\", \"formControlName\", \"cardType\", \"value\", \"credit\"], [\"type\", \"radio\", \"formControlName\", \"cardType\", \"value\", \"debit\"], [\"type\", \"text\", \"formControlName\", \"cardNumber\", \"placeholder\", \"1234 5678 9012 3456\", \"maxlength\", \"16\"], [\"class\", \"error-text\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"cardholderName\", \"placeholder\", \"Name on card\"], [1, \"form-row\"], [\"type\", \"number\", \"formControlName\", \"expiryMonth\", \"placeholder\", \"MM\", \"min\", \"1\", \"max\", \"12\"], [\"type\", \"number\", \"formControlName\", \"expiryYear\", \"placeholder\", \"YYYY\", \"min\", \"2024\"], [\"type\", \"password\", \"formControlName\", \"cvv\", \"placeholder\", \"123\", \"maxlength\", \"4\"], [1, \"form-group\", \"checkbox-group\"], [\"type\", \"checkbox\", \"formControlName\", \"saveCard\"], [1, \"form-actions\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"spinner\", 4, \"ngIf\"], [1, \"error-text\"], [1, \"spinner\"]],\n      template: function PaymentComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Payment Information\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"h3\");\n          i0.ɵɵtext(5, \"Order Summary\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 2)(7, \"p\");\n          i0.ɵɵtext(8);\n          i0.ɵɵpipe(9, \"async\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"p\");\n          i0.ɵɵtext(11);\n          i0.ɵɵpipe(12, \"async\");\n          i0.ɵɵpipe(13, \"number\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(14, PaymentComponent_div_14_Template, 2, 1, \"div\", 3)(15, PaymentComponent_div_15_Template, 7, 0, \"div\", 4)(16, PaymentComponent_form_16_Template, 49, 9, \"form\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate1(\"Total Items: \", i0.ɵɵpipeBind1(9, 5, ctx.cartItemCount$), \"\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\"Total Amount: $\", i0.ɵɵpipeBind2(13, 9, i0.ɵɵpipeBind1(12, 7, ctx.cartTotal$), \"1.2-2\"), \"\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.orderPlaced);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.orderPlaced);\n        }\n      },\n      dependencies: [CommonModule, i6.NgIf, i6.AsyncPipe, i6.DecimalPipe, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.CheckboxControlValueAccessor, i1.RadioControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MaxLengthValidator, i1.MinValidator, i1.MaxValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".payment-container[_ngcontent-%COMP%] {\\n  max-width: 800px;\\n  margin: 2rem auto;\\n  padding: 2rem;\\n  background-color: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n.payment-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .payment-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n  color: #333;\\n}\\n\\n.order-summary[_ngcontent-%COMP%] {\\n  background-color: #f8f9fa;\\n  padding: 1.5rem;\\n  border-radius: 6px;\\n  margin-bottom: 2rem;\\n}\\n.order-summary[_ngcontent-%COMP%]   .summary-details[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-top: 1rem;\\n}\\n.order-summary[_ngcontent-%COMP%]   .summary-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin: 0;\\n  font-size: 1.1rem;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  background-color: #fee;\\n  color: #d32f2f;\\n  padding: 1rem;\\n  border-radius: 4px;\\n  margin-bottom: 1rem;\\n}\\n\\n.success-message[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 2rem;\\n  background-color: #e8f5e9;\\n  border-radius: 6px;\\n  margin: 2rem 0;\\n}\\n.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  color: #2e7d32;\\n  margin-bottom: 1rem;\\n}\\n.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-bottom: 1.5rem;\\n}\\n\\n.payment-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 1.5rem;\\n}\\n.payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-bottom: 0.5rem;\\n  font-weight: 500;\\n  color: #333;\\n}\\n.payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 0.75rem;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 1rem;\\n}\\n.payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border-color: #2196f3;\\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\\n}\\n.payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text].error[_ngcontent-%COMP%], .payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number].error[_ngcontent-%COMP%], .payment-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password].error[_ngcontent-%COMP%] {\\n  border-color: #d32f2f;\\n}\\n.payment-form[_ngcontent-%COMP%]   .card-type-group[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 2rem;\\n}\\n.payment-form[_ngcontent-%COMP%]   .card-type-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5rem;\\n  cursor: pointer;\\n}\\n.payment-form[_ngcontent-%COMP%]   .card-type-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.payment-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 1rem;\\n}\\n.payment-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] {\\n  flex: 1;\\n}\\n.payment-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5rem;\\n  cursor: pointer;\\n  font-weight: normal;\\n}\\n.payment-form[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%] {\\n  color: #d32f2f;\\n  font-size: 0.875rem;\\n  margin-top: 0.25rem;\\n}\\n\\n.form-actions[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  gap: 1rem;\\n  margin-top: 1rem;\\n}\\n.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  padding: 0.75rem 1.5rem;\\n  border: none;\\n  border-radius: 4px;\\n  font-size: 1rem;\\n  cursor: pointer;\\n  transition: background-color 0.2s;\\n}\\n.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled {\\n  opacity: 0.7;\\n  cursor: not-allowed;\\n}\\n.form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%] {\\n  background-color: #f5f5f5;\\n  color: #333;\\n}\\n.form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background-color: #e0e0e0;\\n}\\n.form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%] {\\n  background-color: #2196f3;\\n  color: white;\\n}\\n.form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background-color: #1976d2;\\n}\\n\\n.spinner[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  width: 20px;\\n  height: 20px;\\n  border: 2px solid rgba(255, 255, 255, 0.3);\\n  border-radius: 50%;\\n  border-top-color: white;\\n  animation: _ngcontent-%COMP%_spin 1s linear infinite;\\n}\\n\\n@keyframes _ngcontent-%COMP%_spin {\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wYXltZW50L3BheW1lbnQuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8uLi9hbmd1bGFyJTIwcHJvamVjdC9jYXIvZnJvbnRlbmQvY2FyLWVjb21tZXJjZS1mcm9udGVuZC9zcmMvYXBwL2NvbXBvbmVudHMvcGF5bWVudC9wYXltZW50LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBQ0Esd0NBQUE7QUNDRjtBRENFO0VBQ0UscUJBQUE7RUFDQSxXQUFBO0FDQ0o7O0FER0E7RUFDRSx5QkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FDQUY7QURFRTtFQUNFLGFBQUE7RUFDQSw4QkFBQTtFQUNBLGdCQUFBO0FDQUo7QURFSTtFQUNFLFNBQUE7RUFDQSxpQkFBQTtBQ0FOOztBREtBO0VBQ0Usc0JBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7QUNGRjs7QURLQTtFQUNFLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0FDRkY7QURJRTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtBQ0ZKO0FES0U7RUFDRSxxQkFBQTtBQ0hKOztBRE9BO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsV0FBQTtBQ0pGO0FET0k7RUFDRSxjQUFBO0VBQ0EscUJBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7QUNMTjtBRFFJOzs7RUFHRSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQ05OO0FEUU07OztFQUNFLGFBQUE7RUFDQSxxQkFBQTtFQUNBLDZDQUFBO0FDSlI7QURPTTs7O0VBQ0UscUJBQUE7QUNIUjtBRFFFO0VBQ0UsYUFBQTtFQUNBLFNBQUE7QUNOSjtBRFFJO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7QUNOTjtBRFFNO0VBQ0UsU0FBQTtBQ05SO0FEV0U7RUFDRSxhQUFBO0VBQ0EsU0FBQTtBQ1RKO0FEV0k7RUFDRSxPQUFBO0FDVE47QURjSTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QUNaTjtBRGdCRTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0FDZEo7O0FEa0JBO0VBQ0UsYUFBQTtFQUNBLDhCQUFBO0VBQ0EsU0FBQTtFQUNBLGdCQUFBO0FDZkY7QURpQkU7RUFDRSx1QkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0EsaUNBQUE7QUNmSjtBRGlCSTtFQUNFLFlBQUE7RUFDQSxtQkFBQTtBQ2ZOO0FEbUJFO0VBQ0UseUJBQUE7RUFDQSxXQUFBO0FDakJKO0FEbUJJO0VBQ0UseUJBQUE7QUNqQk47QURxQkU7RUFDRSx5QkFBQTtFQUNBLFlBQUE7QUNuQko7QURxQkk7RUFDRSx5QkFBQTtBQ25CTjs7QUR3QkE7RUFDRSxxQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsMENBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0VBQ0Esa0NBQUE7QUNyQkY7O0FEd0JBO0VBQ0U7SUFDRSx5QkFBQTtFQ3JCRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLnBheW1lbnQtY29udGFpbmVyIHtcclxuICBtYXgtd2lkdGg6IDgwMHB4O1xyXG4gIG1hcmdpbjogMnJlbSBhdXRvO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcblxyXG4gIGgyLCBoMyB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbiAgICBjb2xvcjogIzMzMztcclxuICB9XHJcbn1cclxuXHJcbi5vcmRlci1zdW1tYXJ5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xyXG4gIHBhZGRpbmc6IDEuNXJlbTtcclxuICBib3JkZXItcmFkaXVzOiA2cHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMnJlbTtcclxuXHJcbiAgLnN1bW1hcnktZGV0YWlscyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgbWFyZ2luLXRvcDogMXJlbTtcclxuXHJcbiAgICBwIHtcclxuICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICBmb250LXNpemU6IDEuMXJlbTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi5lcnJvci1tZXNzYWdlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmVlO1xyXG4gIGNvbG9yOiAjZDMyZjJmO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbn1cclxuXHJcbi5zdWNjZXNzLW1lc3NhZ2Uge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBwYWRkaW5nOiAycmVtO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlOGY1ZTk7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIG1hcmdpbjogMnJlbSAwO1xyXG5cclxuICBoMyB7XHJcbiAgICBjb2xvcjogIzJlN2QzMjtcclxuICAgIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbiAgfVxyXG5cclxuICBwIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuICB9XHJcbn1cclxuXHJcbi5wYXltZW50LWZvcm0ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBnYXA6IDEuNXJlbTtcclxuXHJcbiAgLmZvcm0tZ3JvdXAge1xyXG4gICAgbGFiZWwge1xyXG4gICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xyXG4gICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICBjb2xvcjogIzMzMztcclxuICAgIH1cclxuXHJcbiAgICBpbnB1dFt0eXBlPVwidGV4dFwiXSxcclxuICAgIGlucHV0W3R5cGU9XCJudW1iZXJcIl0sXHJcbiAgICBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0ge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgcGFkZGluZzogMC43NXJlbTtcclxuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICBmb250LXNpemU6IDFyZW07XHJcblxyXG4gICAgICAmOmZvY3VzIHtcclxuICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICAgIGJvcmRlci1jb2xvcjogIzIxOTZmMztcclxuICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAycHggcmdiYSgzMywgMTUwLCAyNDMsIDAuMSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICYuZXJyb3Ige1xyXG4gICAgICAgIGJvcmRlci1jb2xvcjogI2QzMmYyZjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLmNhcmQtdHlwZS1ncm91cCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZ2FwOiAycmVtO1xyXG5cclxuICAgIGxhYmVsIHtcclxuICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgZ2FwOiAwLjVyZW07XHJcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuXHJcbiAgICAgIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XHJcbiAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAuZm9ybS1yb3cge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGdhcDogMXJlbTtcclxuXHJcbiAgICAuZm9ybS1ncm91cCB7XHJcbiAgICAgIGZsZXg6IDE7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAuY2hlY2tib3gtZ3JvdXAge1xyXG4gICAgbGFiZWwge1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICBnYXA6IDAuNXJlbTtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICBmb250LXdlaWdodDogbm9ybWFsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLmVycm9yLXRleHQge1xyXG4gICAgY29sb3I6ICNkMzJmMmY7XHJcbiAgICBmb250LXNpemU6IDAuODc1cmVtO1xyXG4gICAgbWFyZ2luLXRvcDogMC4yNXJlbTtcclxuICB9XHJcbn1cclxuXHJcbi5mb3JtLWFjdGlvbnMge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGdhcDogMXJlbTtcclxuICBtYXJnaW4tdG9wOiAxcmVtO1xyXG5cclxuICBidXR0b24ge1xyXG4gICAgcGFkZGluZzogMC43NXJlbSAxLjVyZW07XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBmb250LXNpemU6IDFyZW07XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XHJcblxyXG4gICAgJjpkaXNhYmxlZCB7XHJcbiAgICAgIG9wYWNpdHk6IDAuNztcclxuICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5idG4tc2Vjb25kYXJ5IHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XHJcbiAgICBjb2xvcjogIzMzMztcclxuXHJcbiAgICAmOmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5idG4tcHJpbWFyeSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NmYzO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG5cclxuICAgICY6aG92ZXI6bm90KDpkaXNhYmxlZCkge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTk3NmQyO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLnNwaW5uZXIge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB3aWR0aDogMjBweDtcclxuICBoZWlnaHQ6IDIwcHg7XHJcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBib3JkZXItdG9wLWNvbG9yOiB3aGl0ZTtcclxuICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNwaW4ge1xyXG4gIHRvIHtcclxuICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XHJcbiAgfVxyXG59ICIsIi5wYXltZW50LWNvbnRhaW5lciB7XG4gIG1heC13aWR0aDogODAwcHg7XG4gIG1hcmdpbjogMnJlbSBhdXRvO1xuICBwYWRkaW5nOiAycmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xufVxuLnBheW1lbnQtY29udGFpbmVyIGgyLCAucGF5bWVudC1jb250YWluZXIgaDMge1xuICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XG4gIGNvbG9yOiAjMzMzO1xufVxuXG4ub3JkZXItc3VtbWFyeSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7XG4gIHBhZGRpbmc6IDEuNXJlbTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBtYXJnaW4tYm90dG9tOiAycmVtO1xufVxuLm9yZGVyLXN1bW1hcnkgLnN1bW1hcnktZGV0YWlscyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgbWFyZ2luLXRvcDogMXJlbTtcbn1cbi5vcmRlci1zdW1tYXJ5IC5zdW1tYXJ5LWRldGFpbHMgcCB7XG4gIG1hcmdpbjogMDtcbiAgZm9udC1zaXplOiAxLjFyZW07XG59XG5cbi5lcnJvci1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZlZTtcbiAgY29sb3I6ICNkMzJmMmY7XG4gIHBhZGRpbmc6IDFyZW07XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbn1cblxuLnN1Y2Nlc3MtbWVzc2FnZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMnJlbTtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZjVlOTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBtYXJnaW46IDJyZW0gMDtcbn1cbi5zdWNjZXNzLW1lc3NhZ2UgaDMge1xuICBjb2xvcjogIzJlN2QzMjtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbn1cbi5zdWNjZXNzLW1lc3NhZ2UgcCB7XG4gIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcbn1cblxuLnBheW1lbnQtZm9ybSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogMS41cmVtO1xufVxuLnBheW1lbnQtZm9ybSAuZm9ybS1ncm91cCBsYWJlbCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGNvbG9yOiAjMzMzO1xufVxuLnBheW1lbnQtZm9ybSAuZm9ybS1ncm91cCBpbnB1dFt0eXBlPXRleHRdLFxuLnBheW1lbnQtZm9ybSAuZm9ybS1ncm91cCBpbnB1dFt0eXBlPW51bWJlcl0sXG4ucGF5bWVudC1mb3JtIC5mb3JtLWdyb3VwIGlucHV0W3R5cGU9cGFzc3dvcmRdIHtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDAuNzVyZW07XG4gIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgZm9udC1zaXplOiAxcmVtO1xufVxuLnBheW1lbnQtZm9ybSAuZm9ybS1ncm91cCBpbnB1dFt0eXBlPXRleHRdOmZvY3VzLFxuLnBheW1lbnQtZm9ybSAuZm9ybS1ncm91cCBpbnB1dFt0eXBlPW51bWJlcl06Zm9jdXMsXG4ucGF5bWVudC1mb3JtIC5mb3JtLWdyb3VwIGlucHV0W3R5cGU9cGFzc3dvcmRdOmZvY3VzIHtcbiAgb3V0bGluZTogbm9uZTtcbiAgYm9yZGVyLWNvbG9yOiAjMjE5NmYzO1xuICBib3gtc2hhZG93OiAwIDAgMCAycHggcmdiYSgzMywgMTUwLCAyNDMsIDAuMSk7XG59XG4ucGF5bWVudC1mb3JtIC5mb3JtLWdyb3VwIGlucHV0W3R5cGU9dGV4dF0uZXJyb3IsXG4ucGF5bWVudC1mb3JtIC5mb3JtLWdyb3VwIGlucHV0W3R5cGU9bnVtYmVyXS5lcnJvcixcbi5wYXltZW50LWZvcm0gLmZvcm0tZ3JvdXAgaW5wdXRbdHlwZT1wYXNzd29yZF0uZXJyb3Ige1xuICBib3JkZXItY29sb3I6ICNkMzJmMmY7XG59XG4ucGF5bWVudC1mb3JtIC5jYXJkLXR5cGUtZ3JvdXAge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDJyZW07XG59XG4ucGF5bWVudC1mb3JtIC5jYXJkLXR5cGUtZ3JvdXAgbGFiZWwge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDAuNXJlbTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLnBheW1lbnQtZm9ybSAuY2FyZC10eXBlLWdyb3VwIGxhYmVsIGlucHV0W3R5cGU9cmFkaW9dIHtcbiAgbWFyZ2luOiAwO1xufVxuLnBheW1lbnQtZm9ybSAuZm9ybS1yb3cge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDFyZW07XG59XG4ucGF5bWVudC1mb3JtIC5mb3JtLXJvdyAuZm9ybS1ncm91cCB7XG4gIGZsZXg6IDE7XG59XG4ucGF5bWVudC1mb3JtIC5jaGVja2JveC1ncm91cCBsYWJlbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMC41cmVtO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG4ucGF5bWVudC1mb3JtIC5lcnJvci10ZXh0IHtcbiAgY29sb3I6ICNkMzJmMmY7XG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gIG1hcmdpbi10b3A6IDAuMjVyZW07XG59XG5cbi5mb3JtLWFjdGlvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGdhcDogMXJlbTtcbiAgbWFyZ2luLXRvcDogMXJlbTtcbn1cbi5mb3JtLWFjdGlvbnMgYnV0dG9uIHtcbiAgcGFkZGluZzogMC43NXJlbSAxLjVyZW07XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBmb250LXNpemU6IDFyZW07XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xufVxuLmZvcm0tYWN0aW9ucyBidXR0b246ZGlzYWJsZWQge1xuICBvcGFjaXR5OiAwLjc7XG4gIGN1cnNvcjogbm90LWFsbG93ZWQ7XG59XG4uZm9ybS1hY3Rpb25zIC5idG4tc2Vjb25kYXJ5IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcbiAgY29sb3I6ICMzMzM7XG59XG4uZm9ybS1hY3Rpb25zIC5idG4tc2Vjb25kYXJ5OmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMDtcbn1cbi5mb3JtLWFjdGlvbnMgLmJ0bi1wcmltYXJ5IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzIxOTZmMztcbiAgY29sb3I6IHdoaXRlO1xufVxuLmZvcm0tYWN0aW9ucyAuYnRuLXByaW1hcnk6aG92ZXI6bm90KDpkaXNhYmxlZCkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTk3NmQyO1xufVxuXG4uc3Bpbm5lciB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgYm9yZGVyOiAycHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJvcmRlci10b3AtY29sb3I6IHdoaXRlO1xuICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xufVxuXG5Aa2V5ZnJhbWVzIHNwaW4ge1xuICB0byB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcbiAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","Validators","ReactiveFormsModule","take","finalize","forkJoin","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","ɵɵlistener","PaymentComponent_div_15_Template_button_click_5_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","continueShopping","ɵɵelement","PaymentComponent_form_16_Template_form_ngSubmit_0_listener","_r3","onSubmit","ɵɵtemplate","PaymentComponent_form_16_div_17_Template","PaymentComponent_form_16_div_22_Template","PaymentComponent_form_16_div_28_Template","PaymentComponent_form_16_div_33_Template","PaymentComponent_form_16_div_38_Template","PaymentComponent_form_16_Template_button_click_44_listener","goBack","PaymentComponent_form_16_span_47_Template","PaymentComponent_form_16_span_48_Template","ɵɵproperty","paymentForm","isFieldInvalid","invalid","isProcessing","PaymentComponent","constructor","fb","cartService","authService","orderService","router","cartTotal$","getCartTotal","cartItemCount$","getCartItemCount","cartItems","orderTotal","orderPlaced","userId","subscriptions","group","cardType","required","cardNumber","pattern","cardholderName","expiryMonth","min","max","expiryYear","cvv","saveCard","ngOnInit","isLoggedIn","navigate","initializeComponentData","userSub","user$","pipe","subscribe","next","user","patchValue","name","username","push","cartSub","cartItems$","items","length","totalSub","total","billingAddress","localStorage","getItem","address","JSON","parse","fullName","error","console","fieldName","field","get","dirty","touched","valid","setTimeout","processOrder","Object","keys","controls","forEach","key","control","markAsTouched","shippingAddress","orderRequests","map","item","orderData","carId","id","quantity","totalPrice","price","stringify","createOrder","clearCart","removeItem","ngOnDestroy","sub","unsubscribe","ɵɵdirectiveInject","i1","FormBuilder","i2","CartService","i3","AuthService","i4","OrderService","i5","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","PaymentComponent_Template","rf","ctx","PaymentComponent_div_14_Template","PaymentComponent_div_15_Template","PaymentComponent_form_16_Template","ɵɵpipeBind1","ɵɵpipeBind2","i6","NgIf","AsyncPipe","DecimalPipe","ɵNgNoValidate","DefaultValueAccessor","NumberValueAccessor","CheckboxControlValueAccessor","RadioControlValueAccessor","NgControlStatus","NgControlStatusGroup","MaxLengthValidator","MinValidator","MaxValidator","FormGroupDirective","FormControlName","styles"],"sources":["C:\\angular project\\car\\frontend\\car-ecommerce-frontend\\src\\app\\components\\payment\\payment.component.ts","C:\\angular project\\car\\frontend\\car-ecommerce-frontend\\src\\app\\components\\payment\\payment.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { CartService } from '../../services/cart.service';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { OrderService } from '../../services/order.service';\r\nimport { take, finalize } from 'rxjs/operators';\r\nimport { CartItem } from '../../models/cart-item.model';\r\nimport { forkJoin, Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-payment',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule],\r\n  templateUrl: './payment.component.html',\r\n  styleUrls: ['./payment.component.scss']\r\n})\r\nexport class PaymentComponent implements OnInit, OnDestroy {\r\n  paymentForm: FormGroup;\r\n  cartTotal$ = this.cartService.getCartTotal();\r\n  cartItemCount$ = this.cartService.getCartItemCount();\r\n  cartItems: CartItem[] = [];\r\n  orderTotal: number = 0;\r\n  isProcessing = false;\r\n  errorMessage = '';\r\n  orderPlaced = false;\r\n  userId: number | null = null;\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private cartService: CartService,\r\n    private authService: AuthService,\r\n    private orderService: OrderService,\r\n    private router: Router\r\n  ) {\r\n    this.paymentForm = this.fb.group({\r\n      cardType: ['credit', [Validators.required]],\r\n      cardNumber: ['', [Validators.required, Validators.pattern('^[0-9]{16}$')]],\r\n      cardholderName: ['', [Validators.required]],\r\n      expiryMonth: ['', [Validators.required, Validators.min(1), Validators.max(12)]],\r\n      expiryYear: ['', [Validators.required, Validators.pattern('^[0-9]{4}$')]],\r\n      cvv: ['', [Validators.required, Validators.pattern('^[0-9]{3,4}$')]],\r\n      saveCard: [false]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Single authentication check\r\n    if (!this.authService.isLoggedIn()) {\r\n      this.router.navigate(['/login']);\r\n      return;\r\n    }\r\n\r\n    // Initialize component data\r\n    this.initializeComponentData();\r\n  }\r\n\r\n  private initializeComponentData(): void {\r\n    // Get user data\r\n    const userSub = this.authService.user$.pipe(take(1)).subscribe({\r\n      next: (user) => {\r\n        if (user) {\r\n          this.userId = user.userId;\r\n          this.paymentForm.patchValue({\r\n            cardholderName: user.name || user.username\r\n          });\r\n        }\r\n      }\r\n    });\r\n    this.subscriptions.push(userSub);\r\n\r\n    // Get cart items\r\n    const cartSub = this.cartService.cartItems$.pipe(take(1)).subscribe(items => {\r\n      this.cartItems = items;\r\n      if (!items.length) {\r\n        this.router.navigate(['/cars']);\r\n      }\r\n    });\r\n    this.subscriptions.push(cartSub);\r\n    \r\n    // Get cart total\r\n    const totalSub = this.cartTotal$.pipe(take(1)).subscribe(total => {\r\n      this.orderTotal = total;\r\n    });\r\n    this.subscriptions.push(totalSub);\r\n\r\n    // Check billing address\r\n    const billingAddress = localStorage.getItem('billingAddress');\r\n    if (!billingAddress) {\r\n      this.router.navigate(['/checkout']);\r\n      return;\r\n    }\r\n\r\n    // Pre-fill cardholder name from billing address if available\r\n    try {\r\n      const address = JSON.parse(billingAddress);\r\n      if (address.fullName) {\r\n        this.paymentForm.patchValue({\r\n          cardholderName: address.fullName\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error parsing billing address:', error);\r\n      this.router.navigate(['/checkout']);\r\n    }\r\n  }\r\n\r\n  isFieldInvalid(fieldName: string): boolean {\r\n    const field = this.paymentForm.get(fieldName);\r\n    return field ? (field.invalid && (field.dirty || field.touched)) : false;\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.paymentForm.valid && !this.isProcessing) {\r\n      this.isProcessing = true;\r\n      this.errorMessage = '';\r\n      \r\n      // Simulate payment processing\r\n      setTimeout(() => {\r\n        this.processOrder();\r\n      }, 1500);\r\n    } else {\r\n      Object.keys(this.paymentForm.controls).forEach(key => {\r\n        const control = this.paymentForm.get(key);\r\n        if (control?.invalid) {\r\n          control.markAsTouched();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  processOrder(): void {\r\n    if (!this.userId || !this.cartItems.length) {\r\n      this.isProcessing = false;\r\n      this.errorMessage = 'Unable to process order. Please try again.';\r\n      return;\r\n    }\r\n\r\n    const billingAddress = localStorage.getItem('billingAddress');\r\n    if (!billingAddress) {\r\n      this.isProcessing = false;\r\n      this.router.navigate(['/checkout']);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const shippingAddress = JSON.parse(billingAddress);\r\n      \r\n      // Create an order for each item in the cart\r\n      const orderRequests = this.cartItems.map(item => {\r\n        const orderData = {\r\n          userId: this.userId!,\r\n          carId: item.id,\r\n          quantity: item.quantity,\r\n          totalPrice: item.price * item.quantity,\r\n          shippingAddress: JSON.stringify(shippingAddress)\r\n        };\r\n        return this.orderService.createOrder(orderData);\r\n      });\r\n\r\n      // Process all orders\r\n      forkJoin(orderRequests)\r\n        .pipe(\r\n          finalize(() => this.isProcessing = false)\r\n        )\r\n        .subscribe({\r\n          next: () => {\r\n            this.orderPlaced = true;\r\n            this.cartService.clearCart().subscribe();\r\n            localStorage.removeItem('billingAddress');\r\n          },\r\n          error: (error) => {\r\n            console.error('Order creation error:', error);\r\n            this.errorMessage = 'Failed to create order. Please try again.';\r\n          }\r\n        });\r\n    } catch (error) {\r\n      console.error('Error processing order:', error);\r\n      this.isProcessing = false;\r\n      this.errorMessage = 'Failed to process order. Please try again.';\r\n    }\r\n  }\r\n\r\n  goBack(): void {\r\n    this.router.navigate(['/checkout']);\r\n  }\r\n\r\n  continueShopping(): void {\r\n    this.router.navigate(['/cars']);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    // Cleanup subscriptions\r\n    this.subscriptions.forEach(sub => sub.unsubscribe());\r\n  }\r\n} ","<div class=\"payment-container\">\r\n  <h2>Payment Information</h2>\r\n  \r\n  <div class=\"order-summary\">\r\n    <h3>Order Summary</h3>\r\n    <div class=\"summary-details\">\r\n      <p>Total Items: {{ cartItemCount$ | async }}</p>\r\n      <p>Total Amount: ${{ cartTotal$ | async | number:'1.2-2' }}</p>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Error Message -->\r\n  <div *ngIf=\"errorMessage\" class=\"error-message\">\r\n    {{ errorMessage }}\r\n  </div>\r\n\r\n  <!-- Success Message -->\r\n  <div *ngIf=\"orderPlaced\" class=\"success-message\">\r\n    <h3>Thank you for your order!</h3>\r\n    <p>Your order has been successfully placed.</p>\r\n    <button class=\"btn-primary\" (click)=\"continueShopping()\">Continue Shopping</button>\r\n  </div>\r\n\r\n  <!-- Payment Form -->\r\n  <form *ngIf=\"!orderPlaced\" [formGroup]=\"paymentForm\" (ngSubmit)=\"onSubmit()\" class=\"payment-form\">\r\n    <h3>Payment Details</h3>\r\n    \r\n    <!-- Card Type -->\r\n    <div class=\"form-group\">\r\n      <label>Card Type</label>\r\n      <div class=\"card-type-group\">\r\n        <label>\r\n          <input type=\"radio\" formControlName=\"cardType\" value=\"credit\">\r\n          Credit Card\r\n        </label>\r\n        <label>\r\n          <input type=\"radio\" formControlName=\"cardType\" value=\"debit\">\r\n          Debit Card\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Card Number -->\r\n    <div class=\"form-group\">\r\n      <label>Card Number</label>\r\n      <input type=\"text\" formControlName=\"cardNumber\" placeholder=\"1234 5678 9012 3456\" maxlength=\"16\">\r\n      <div *ngIf=\"isFieldInvalid('cardNumber')\" class=\"error-text\">\r\n        Please enter a valid 16-digit card number\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Cardholder Name -->\r\n    <div class=\"form-group\">\r\n      <label>Cardholder Name</label>\r\n      <input type=\"text\" formControlName=\"cardholderName\" placeholder=\"Name on card\">\r\n      <div *ngIf=\"isFieldInvalid('cardholderName')\" class=\"error-text\">\r\n        Please enter the cardholder name\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Expiry Date -->\r\n    <div class=\"form-row\">\r\n      <div class=\"form-group\">\r\n        <label>Expiry Month</label>\r\n        <input type=\"number\" formControlName=\"expiryMonth\" placeholder=\"MM\" min=\"1\" max=\"12\">\r\n        <div *ngIf=\"isFieldInvalid('expiryMonth')\" class=\"error-text\">\r\n          Enter a valid month (1-12)\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Expiry Year</label>\r\n        <input type=\"number\" formControlName=\"expiryYear\" placeholder=\"YYYY\" min=\"2024\">\r\n        <div *ngIf=\"isFieldInvalid('expiryYear')\" class=\"error-text\">\r\n          Enter a valid year\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- CVV -->\r\n    <div class=\"form-group\">\r\n      <label>CVV</label>\r\n      <input type=\"password\" formControlName=\"cvv\" placeholder=\"123\" maxlength=\"4\">\r\n      <div *ngIf=\"isFieldInvalid('cvv')\" class=\"error-text\">\r\n        Enter a valid CVV (3-4 digits)\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Save Card -->\r\n    <div class=\"form-group checkbox-group\">\r\n      <label>\r\n        <input type=\"checkbox\" formControlName=\"saveCard\">\r\n        Save card for future purchases\r\n      </label>\r\n    </div>\r\n\r\n    <!-- Form Actions -->\r\n    <div class=\"form-actions\">\r\n      <button type=\"button\" class=\"btn-secondary\" (click)=\"goBack()\">Back to Checkout</button>\r\n      <button type=\"submit\" class=\"btn-primary\" [disabled]=\"paymentForm.invalid || isProcessing\">\r\n        <span *ngIf=\"!isProcessing\">Place Order</span>\r\n        <span *ngIf=\"isProcessing\" class=\"spinner\"></span>\r\n      </button>\r\n    </div>\r\n  </form>\r\n</div> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}